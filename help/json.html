<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=windows-1252">
	<TITLE>COBOLware XML</TITLE>
	<META NAME="GENERATOR" CONTENT="BrOffice.org 3.1  (Win32)">
	<META NAME="CREATED" CONTENT="20080208;9244000">
	<META NAME="CHANGEDBY" CONTENT="Carlos Roberto de Souza Nunes">
	<META NAME="CHANGED" CONTENT="20190524;5373400">
	<STYLE TYPE="text/css">
	<!--
		TD P { color: #000000; font-family: "Arial" }
		H1 { color: #000000 }
		P { color: #000000; font-family: "Arial" }
		H5 { color: #000000 }
		PRE { color: #000000 }
	-->
	</STYLE>
</HEAD>
<BODY LANG="pt-BR" TEXT="#000000" DIR="LTR">
<H1><FONT COLOR="#008080">JSON</FONT></H1>
<P>Documentos <A HREF="http://pt.wikipedia.org/wiki/XML">JSON</A>.</P>
<H5>Sintaxe</H5>
<P><FONT COLOR="#008080">JSON </FONT><FONT COLOR="#000000">[ [ [</FONT><FONT COLOR="#008080">
<A HREF="#GET">GET INTO</A> </FONT><FONT COLOR="#000000">| </FONT><FONT COLOR="#008080"><A HREF="#PUT">PUT
FROM</A> </FONT><FONT COLOR="#000000">]</FONT><FONT COLOR="#008080">
</FONT><FONT COLOR="#008080"><I><A HREF="#registro">registro</A> </I></FONT><FONT COLOR="#000000">]
</FONT><FONT COLOR="#008080">FILE </FONT><A HREF="#arquivo"><FONT COLOR="#000080"><I>arquivo</I></FONT></A><FONT COLOR="#008080">
</FONT><FONT COLOR="#000000">]</FONT><FONT COLOR="#008080"><BR><A HREF="#LINE-FEED">LINE-FEED</A></FONT><A HREF="#tabela em documento XML"><FONT COLOR="#008080"><I><BR></I></FONT></A><FONT COLOR="#008080">STATUS
</FONT><A HREF="#file status"><FONT COLOR="#000080"><I>file status</I></FONT></A></P>
<H5>Argumentos</H5>
<P><A NAME="arquivo"></A><I>arquivo</I></P>
<P>Nome do arquivo a ser importado de JSON para COBOL ou exportado de
COBOL para JSON.</P>
<P><A NAME="GET"></A><FONT COLOR="#008080">GET INTO</FONT><BR><BR>Indica
que a opera&ccedil;&atilde;o a ser realizada &eacute; de importa&ccedil;&atilde;o
de um documento JSON para um <A HREF="#registro"><FONT COLOR="#008080"><I>registro</I></FONT></A>
COBOL.</P>
<P><A NAME="PUT"></A><FONT COLOR="#008080">PUT FROM</FONT><BR><BR>Indica
que a opera&ccedil;&atilde;o a ser realizada &eacute; de exporta&ccedil;&atilde;o
de um <A HREF="#registro"><FONT COLOR="#008080"><I>registro</I></FONT></A>
COBOL produzindo um documento JSON.</P>
<P><A NAME="LINE-FEED"></A><A NAME="registro"></A><A NAME="file status"></A>
<FONT COLOR="#008080">LINE-FEED</FONT><BR><BR>Indica que a documento
JSON deve ser produzido no formato texto. Neste caso, um terminador
de linha X&ldquo;0D0A&rdquo; ser&aacute; inserido ao final da linhas
e a hierarquia ser&aacute; edentada de modo que seja facilmente
visualiz&aacute;vel por qualquer editor de textos.
<BR><EM><BR>registro</EM><BR><BR>Identificador COBOL de n&iacute;vel
1 que recebe os dados resultantes da requisi&ccedil;&atilde;o <A HREF="#GET"><FONT COLOR="#008080">GET
INTO</FONT></A> ou fornece os dados para a produ&ccedil;&atilde;o do
documento JSON quando solicitado <A HREF="#PUT"><FONT COLOR="#008080">PUT
FROM</FONT></A>. <BR><BR>Durante a compila&ccedil;&atilde;o, o
registro &eacute; analisado produzindo uma associa&ccedil;&atilde;o
entre os n&iacute;veis, nomes e atributos dos campos COBOL e a
hierarquia de delimitadores JSON.<BR><BR>Ao se codificar o registro
em COBOL visando a compatibilidade com os padr&otilde;es JSON &eacute;
preciso observar:<BR><BR>- Mai&uacute;sculas e min&uacute;sculas nos
nomes COBOL n&atilde;o fazem diferen&ccedil;a nas associa&ccedil;&otilde;es
COBOL-JSON, contudo, a linguagem de destino pode ser case sensitive,
nesse caso, basta declarar os campos utilizando mai&uacute;sculas e
min&uacute;sculas que esses nomes ser&atilde;o associados
independentemente da case para o COBOL, mas as strings de origem
ser&atilde;o preservadas na produ&ccedil;&atilde;o de documentos
JSON.<BR><BR>- Se o nome campo a ser tratado for uma palavra
reservada em COBOL, por exemplo &ldquo;value&rdquo;, isso pode ser
contornado com a inser&ccedil;&atilde;o do prefixo &ldquo;JSON-&rdquo;,
desse modo o nome em COBOL ficaria &ldquo;JASON-VALUE&rdquo;, o COBOL
aceita o nome, por&eacute;m o nome tratado ser&aacute; &ldquo;VALUE&rdquo;.<BR><BR>-
A clausula OCCURS s&oacute; deve ser utilizada em grupos ou seja,
jamais no mesmo n&iacute;vel que a PICTURE, quanto maior o n&uacute;mero
de ocorr&ecirc;ncias previstas nos arrays do registro COBOL mais
pesado ser&aacute; o processamento;<BR><BR>- Na exporta&ccedil;&atilde;o,
as ocorr&ecirc;ncias n&atilde;o utilizadas devem estar totalmente
preenchidas com espa&ccedil;os (no n&iacute;vel do grupo) para que
n&atilde;o sejam consideradas, da mesma forma, as marca&ccedil;&otilde;es
JSON n&atilde;o encontradas no documento JSON durante a importa&ccedil;&atilde;o
resultam em ocorr&ecirc;ncias com o grupo totalmente preenchido com
espa&ccedil;os indicando que n&atilde;o h&aacute; mais dados nas
ocorr&ecirc;ncias restantes no array; <BR><BR>- Os campos precisam
ser todos USAGE DISPLAY como &eacute; o padr&atilde;o da linguagem
COBOL..<BR><BR>- Os campos preenchidos com <FONT COLOR="#ff0000">LOW-VALUES</FONT>
resultam na declara&ccedil;&atilde;o null como valor dos campos em
JSON.<BR><BR><EM>file status</EM><BR><BR>Vari&aacute;vel de 2
caracteres que retorna o c&oacute;digo do resultado da opera&ccedil;&atilde;o
seguindo o padr&atilde;o do file status do COBOL.</P>
<H5>Exemplo<BR><BR><BR>
</H5>
<TABLE WIDTH=838 BORDER=1 CELLPADDING=2 CELLSPACING=3>
	<COL WIDTH=826>
	<TR>
		<TD WIDTH=826>
			<P ALIGN=CENTER>Documento JSON</P>
		</TD>
	</TR>
	<TR>
		<TD WIDTH=826>
			<PRE STYLE="text-align: left">{<FONT COLOR="#ff0000">&quot;json&quot;</FONT>:{
    <FONT COLOR="#ff0000">&quot;curriculo&quot;</FONT>:{
       <FONT COLOR="#ff0000">&quot;InformacaoPessoal&quot;</FONT>:{
          <FONT COLOR="#ff0000">&quot;DataNascimento&quot;</FONT>:<FONT COLOR="#5e11a6">&quot;1980-12-01&quot;</FONT>,<FONT COLOR="#ff0000">&quot;Nomecompleto&quot;</FONT>:<FONT COLOR="#5e11a6">&quot;MONTEIRO LOBATO&quot;</FONT>,
          <FONT COLOR="#ff0000">&quot;Contatos&quot;</FONT>:{
             <FONT COLOR="#ff0000">&quot;Endereco&quot;</FONT>:{
                <FONT COLOR="#ff0000">&quot;Rua&quot;</FONT>:<FONT COLOR="#5e11a6">&quot;R.COBOL&quot;</FONT>,<FONT COLOR="#ff0000">&quot;Numero&quot;</FONT>:<FONT COLOR="#5e11a6">&quot;123&quot;</FONT>,<FONT COLOR="#ff0000">&quot;Cidade&quot;</FONT>:<FONT COLOR="#5e11a6">&quot;RIO DE JANEIRO&quot;</FONT>,<FONT COLOR="#ff0000">&quot;CEP&quot;</FONT>:<FONT COLOR="#5e11a6">99999999</FONT>,<FONT COLOR="#ff0000">&quot;UF&quot;</FONT>:&quot;RJ&quot;
                },<FONT COLOR="#ff0000">&quot;Telefone&quot;</FONT>:<FONT COLOR="#5e11a6">&quot;9999-9999&quot;</FONT>,<FONT COLOR="#ff0000">&quot;Email&quot;</FONT>:<FONT COLOR="#5e11a6">&quot;contato@COBOLware.com&quot;</FONT>
             },<FONT COLOR="#ff0000">&quot;Nacionalidade&quot;</FONT>:<FONT COLOR="#5e11a6">&quot;Brasileira&quot;</FONT>,<FONT COLOR="#ff0000">&quot;Sexo&quot;</FONT>:<FONT COLOR="#5e11a6">&quot;M&quot;</FONT>
          },<FONT COLOR="#ff0000">&quot;objetivo&quot;</FONT>:<FONT COLOR="#5e11a6">&quot;Atuar na area de TI&quot;</FONT>,<FONT COLOR="#ff0000">&quot;Experiencias&quot;</FONT>:{
          <FONT COLOR="#ff0000">&quot;Emprego&quot;</FONT>:[
             {<FONT COLOR="#ff0000">&quot;Num&quot;</FONT>:<FONT COLOR="#5e11a6">1</FONT>,<FONT COLOR="#ff0000">&quot;Cargo&quot;</FONT>:<FONT COLOR="#5e11a6">&quot;Suporte tecnico&quot;</FONT>,<FONT COLOR="#ff0000">&quot;Empregador&quot;</FONT>:<FONT COLOR="#5e11a6">&quot;IBM, RIO DE JANEIRO - RJ&quot;</FONT>},
             {<FONT COLOR="#ff0000">&quot;Num&quot;</FONT>:<FONT COLOR="#5e11a6">2</FONT>,<FONT COLOR="#ff0000">&quot;Cargo&quot;</FONT>:<FONT COLOR="#5e11a6">&quot;Programador&quot;</FONT>,<FONT COLOR="#ff0000">&quot;Empregador&quot;</FONT>:<FONT COLOR="#5e11a6">&quot;Micro Focus, RECIFE - PE&quot;</FONT>},
             {<FONT COLOR="#ff0000">&quot;Num&quot;</FONT>:<FONT COLOR="#5e11a6">3</FONT>,<FONT COLOR="#ff0000">&quot;Cargo&quot;</FONT>:<FONT COLOR="#5e11a6">&quot;Engenheiro&quot;</FONT>,<FONT COLOR="#ff0000">&quot;Empregador&quot;</FONT>:<FONT COLOR="#5e11a6">&quot;COBOLware, Americana - SP&quot;</FONT>}
             ]
          },<FONT COLOR="#ff0000">&quot;Formacao&quot;</FONT>:<FONT COLOR="#5e11a6">&quot;Superior Completo&quot;</FONT>
   }
}}</PRE>
		</TD>
	</TR>
	<TR>
		<TD WIDTH=826>
			<P ALIGN=CENTER>Codifica&ccedil;&atilde;o COBOL</P>
		</TD>
	</TR>
	<TR>
		<TD WIDTH=826 VALIGN=TOP>
			<PRE STYLE="text-align: left">       IDENTIFICATION DIVISION.
       PROGRAM-ID.    <FONT COLOR="#ff0000">JSON</FONT>.
       AUTHOR.        COBOLware Services Ltda.
       DATE-WRITTEN.  12/11/2010.
       SECURITY.      <FONT COLOR="#ff0000">*************************************************</FONT>
<FONT COLOR="#ff0000">                      *                                               *</FONT>
<FONT COLOR="#ff0000">                      *  Exemplo de leitura de documento JSON         *</FONT>
<FONT COLOR="#ff0000">                      *                                               *</FONT>
<FONT COLOR="#ff0000">                      *************************************************</FONT>
       DATA DIVISION.
       WORKING-STORAGE SECTION.

       77  <FONT COLOR="#008000">FS-JSON</FONT>                          PIC  X(002) VALUE '<FONT COLOR="#ff0000">00</FONT>'.

       01  <FONT COLOR="#008000">DOCUMENTO-JSON</FONT>.
           02 <FONT COLOR="#008000">curriculo</FONT>.
              03 <FONT COLOR="#008000">InformacaoPessoal</FONT>.
                 04 <FONT COLOR="#008000">DataNascimento</FONT>         PIC  X(010).
                 04 <FONT COLOR="#008000">Nomecompleto</FONT>           PIC  X(050).
                 04 <FONT COLOR="#008000">Contatos</FONT>.
                    05 <FONT COLOR="#008000">Endereco</FONT>.
                       06 <FONT COLOR="#008000">Rua</FONT>              PIC  X(050).
                       06 <FONT COLOR="#008000">Numero</FONT>           PIC  X(010).
                       06 <FONT COLOR="#008000">Cidade</FONT>           PIC  X(020).
                       06 <FONT COLOR="#008000">CEP</FONT>              PIC  9(008).
                       06 <FONT COLOR="#008000">UF</FONT>               PIC  X(002).
                     05 <FONT COLOR="#008000">Telefone</FONT>           PIC  X(009).
                     05 <FONT COLOR="#008000">Email</FONT>              PIC  X(050).
                  04 <FONT COLOR="#008000">Nacionalidade</FONT>         PIC  X(020).
                  04 <FONT COLOR="#008000">Sexo</FONT>                  PIC  X(001).
               03 <FONT COLOR="#008000">objetivo</FONT>                 PIC  X(050).
               03 <FONT COLOR="#008000">Experiencias</FONT>.
                  04 <FONT COLOR="#008000">Emprego</FONT> OCCURS 10.
                     05 <FONT COLOR="#008000">Num</FONT>                PIC  9(002).
                     05 <FONT COLOR="#008000">Cargo</FONT>              PIC  X(030).
                     05 <FONT COLOR="#008000">Empregador</FONT>         PIC  X(030).
               03 <FONT COLOR="#008000">Formacao</FONT>                 PIC  X(030).

       PROCEDURE DIVISION.

       <FONT COLOR="#008000">000-INICIO</FONT>.

           EXEC <FONT COLOR="#008080">COBOLware JSON GET INTO</FONT> DOCUMENTO-JSON
                <FONT COLOR="#008080">File</FONT> '<FONT COLOR="#ff0000">teste.json</FONT>'
                <FONT COLOR="#008080">STATUS</FONT> <A HREF="#file status"><FONT COLOR="#008000">FS-JSON</FONT></A>
           END-EXEC

           IF FS-JSON = '<FONT COLOR="#ff0000">00</FONT>'
              EXEC <FONT COLOR="#008080">COBOLware <A HREF="send.html">Send</A></FONT>
                   <FONT COLOR="#008080">Message</FONT> '<FONT COLOR="#ff0000">Documento JSON carregado com sucesso</FONT>'
              END-EXEC
           ELSE
              EXEC <FONT COLOR="#008080">COBOLware <A HREF="#send.html">Send</A></FONT>
                   <FONT COLOR="#008080">Message</FONT> '<FONT COLOR="#ff0000">Falha na carga do documento JSON</FONT>'
              END-EXEC
           END-IF.

       <FONT COLOR="#008000">000-99-FIM</FONT>. GOBACK.

       END PROGRAM <FONT COLOR="#ff0000">JSON</FONT>.</PRE>
		</TD>
	</TR>
</TABLE>
<H5><BR><BR>
</H5>
</BODY>
</HTML>